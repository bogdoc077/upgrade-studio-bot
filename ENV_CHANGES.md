# –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–∏ –≤ .env –¥–ª—è webhook –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏

## ‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —è–∫—ñ –≤–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ:

```env
LOG_LEVEL=INFO                    # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ (–Ω–µ DEBUG)
ENVIRONMENT=production            # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
WEBHOOK_HOST=0.0.0.0             # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
WEBHOOK_PORT=8000                # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
```

## ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –∑–º—ñ–Ω–∏:

### 1. –û–Ω–æ–≤–∏—Ç–∏ WEBHOOK_URL (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

**–ü–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è:**
```env
WEBHOOK_URL=https://admin.upgrade21.com/webhook
```

**–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–µ (–¥–ª—è —è—Å–Ω–æ—Å—Ç—ñ):**
```env
WEBHOOK_URL=https://admin.upgrade21.com
```

**–ß–æ–º—É:** 
- Telegram webhook: `https://admin.upgrade21.com/telegram-webhook`
- Stripe webhook: `https://admin.upgrade21.com/webhook`
- Base URL –±–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —à–ª—è—Ö—É –±—ñ–ª—å—à —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –¶–µ –ù–ï –∫—Ä–∏—Ç–∏—á–Ω–æ - Telegram webhook –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ —á–µ—Ä–µ–∑ `setup_telegram_webhook.py`, —è–∫–∏–π –¥–æ–¥–∞—î `/telegram-webhook` –¥–æ URL –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

### 2. WEBHOOK_PATH –º–æ–∂–Ω–∞ –≤–∏–¥–∞–ª–∏—Ç–∏

**–ü–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è:**
```env
WEBHOOK_PATH=/webhook
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:**
- –ú–æ–∂–Ω–∞ –∑–∞–ª–∏—à–∏—Ç–∏ —è–∫ —î (–¥–ª—è Stripe)
- –ê–±–æ –≤–∏–¥–∞–ª–∏—Ç–∏ (–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ –Ω–æ–≤—ñ–π –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—ñ)

## üìù –Ø–∫ –æ–Ω–æ–≤–∏—Ç–∏ (—è–∫—â–æ —Ö–æ—á–µ—Ç–µ):

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ
cd /opt/upgrade-studio-bot

# –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ .env
nano .env

# –ó–º—ñ–Ω–∏—Ç–∏:
WEBHOOK_URL=https://admin.upgrade21.com

# –ó–±–µ—Ä–µ–≥—Ç–∏ (Ctrl+O, Enter, Ctrl+X)

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ webhook
systemctl restart upgrade-webhook
```

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –∑–º—ñ–Ω:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Telegram webhook
cd /opt/upgrade-studio-bot
source venv/bin/activate
python setup_telegram_webhook.py check

# –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏:
# URL: https://admin.upgrade21.com/telegram-webhook
# Pending updates: 0
# ‚úÖ –ü–æ–º–∏–ª–æ–∫ –Ω–µ–º–∞—î
```

## ‚ö° –ö—Ä–∏—Ç–∏—á–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (–ù–ï –ó–ú–Ü–ù–Æ–í–ê–¢–ò):

```env
# –°–µ–∫—Ä–µ—Ç–Ω—ñ –∫–ª—é—á—ñ - –ù–ï –ó–ú–Ü–ù–Æ–í–ê–¢–ò –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ
TELEGRAM_BOT_TOKEN=...
STRIPE_SECRET_KEY=...
STRIPE_WEBHOOK_SECRET=...

# –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö - –ù–ï –ó–ú–Ü–ù–Æ–í–ê–¢–ò
DATABASE_URL=mysql+pymysql://...
DB_ENCRYPTION_KEY=...

# –ü–æ—Ä—Ç–∏ - –ù–ï –ó–ú–Ü–ù–Æ–í–ê–¢–ò (nginx –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –Ω–∞ —Ü—ñ)
WEBHOOK_PORT=8000
API_PORT=8001
ADMIN_PANEL_PORT=3000
```

## üìä –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω (–ë–ï–ó –ó–ú–Ü–ù):

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î —Å—Ç–∞–±—ñ–ª—å–Ω–æ:
- ‚úÖ Telegram webhook: `https://admin.upgrade21.com/telegram-webhook`
- ‚úÖ Stripe webhook: `https://admin.upgrade21.com/webhook`
- ‚úÖ LOG_LEVEL=INFO (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)
- ‚úÖ CPU: 0%
- ‚úÖ RAM: 42%

**–í–∏—Å–Ω–æ–≤–æ–∫:** –ó–º—ñ–Ω—é–≤–∞—Ç–∏ –Ω—ñ—á–æ–≥–æ –ù–ï –û–ë–û–í'–Ø–ó–ö–û–í–û. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑ –ø–æ—Ç–æ—á–Ω–∏–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏.

## üÜï –ù–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏):

–î–ª—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏:

```env
# –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è debug —Ä–µ–∂–∏–º—É (—Ç—ñ–ª—å–∫–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏)
# DEBUG=false

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥–∫–ª—é—á–µ–Ω—å webhook
# WEBHOOK_MAX_CONNECTIONS=100

# Timeout –¥–ª—è webhook –∑–∞–ø–∏—Ç—ñ–≤ (—Å–µ–∫—É–Ω–¥–∏)
# WEBHOOK_TIMEOUT=30
```

---

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –ó–∞–ª–∏—à–∏—Ç–∏ –≤—Å–µ —è–∫ —î. –ü–æ—Ç–æ—á–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞ —ñ –ø—Ä–∞—Ü—é—î —Å—Ç–∞–±—ñ–ª—å–Ω–æ.
