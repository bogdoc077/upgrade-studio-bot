# Upgrade Studio Bot

–¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç –¥–ª—è —Å—Ç—É–¥—ñ—ó —Ñ—ñ—Ç–Ω–µ—Å—É –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é Stripe –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –ø—ñ–¥–ø–∏—Å–æ–∫.

## –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

- üìù –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è–º
- üí≥ –û–ø–ª–∞—Ç–∞ –ø—ñ–¥–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ Stripe
- üîî –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –ø—Ä–æ –ø—Ä–∏—î–¥–Ω–∞–Ω–Ω—è –¥–æ –∫–∞–Ω–∞–ª—É
- ‚öôÔ∏è –ö–µ—Ä—É–≤–∞–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–æ—é (–ø–∞—É–∑–∞/—Å–∫–∞—Å—É–≤–∞–Ω–Ω—è/–ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è)
- üìä –î–∞—à–±–æ—Ä–¥ –∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º –¥–æ –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö –∫–∞–Ω–∞–ª—ñ–≤

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
```bash
git clone https://github.com/bogdoc077/upgrade-studio-bot.git
cd upgrade-studio-bot
```

2. –°—Ç–≤–æ—Ä—ñ—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∞–±–æ
venv\Scripts\activate  # Windows
```

3. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```bash
pip install -r requirements.txt
```

4. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤—ñ `.env.example`:
```bash
cp .env.example .env
```

5. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ `.env`:
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –≤—ñ–¥ @BotFather
- `STRIPE_SECRET_KEY` - —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á Stripe
- `STRIPE_PUBLISHABLE_KEY` - –ø—É–±–ª—ñ—á–Ω–∏–π –∫–ª—é—á Stripe
- `STRIPE_WEBHOOK_SECRET` - —Å–µ–∫—Ä–µ—Ç –¥–ª—è webhook
- –Ü–Ω—à—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–≥—ñ–¥–Ω–æ –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏

## –ó–∞–ø—É—Å–∫

### –†–µ–∂–∏–º polling (–¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏):
```bash
python main.py
```

### –†–µ–∂–∏–º webhook (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É):
1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å webhook —Å–µ—Ä–≤–µ—Ä:
```bash
python webhook_server.py
```

2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞ –∑ webhook:
```bash
python -c "import asyncio; from main import bot_instance; asyncio.run(bot_instance.start_webhook())"
```

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Stripe

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –∞–∫–∞—É–Ω—Ç –Ω–∞ [Stripe](https://stripe.com)
2. –û—Ç—Ä–∏–º–∞–π—Ç–µ API –∫–ª—é—á—ñ –∑ Dashboard
3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ webhook endpoint –Ω–∞ –≤–∞—à–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ
4. –î–æ–¥–∞–π—Ç–µ –ø–æ–¥—ñ—ó –¥–æ webhook:
   - `checkout.session.completed`
   - `invoice.payment_succeeded`
   - `invoice.payment_failed`
   - `customer.subscription.deleted`

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Telegram

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–∞–Ω–∞–ª —Ç–∞ —á–∞—Ç
3. –î–æ–¥–∞–π—Ç–µ –±–æ—Ç–∞ —è–∫ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∑ –ø—Ä–∞–≤–∞–º–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
4. –û—Ç—Ä–∏–º–∞–π—Ç–µ ID –∫–∞–Ω–∞–ª—ñ–≤ –æ–¥–Ω–∏–º –∑ —Å–ø–æ—Å–æ–±—ñ–≤:

### –°–ø–æ—Å—ñ–± 1: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É –±–æ—Ç–∞
1. **–î–ª—è –≥—Ä—É–ø:** –î–æ–¥–∞–π—Ç–µ –±–æ—Ç–∞ –¥–æ –≥—Ä—É–ø–∏ —ñ –Ω–∞–ø–∏—à—ñ—Ç—å `/get_chat_info`
2. **–î–ª—è –∫–∞–Ω–∞–ª—ñ–≤:** –î–æ–¥–∞–π—Ç–µ –±–æ—Ç–∞ —è–∫ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —ñ –Ω–∞–ø–∏—à—ñ—Ç—å `/chat_id` (ID –Ω–∞–¥—ñ—à–ª–µ—Ç—å—Å—è –≤–∞–º —É –ø—Ä–∏–≤–∞—Ç–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è)
3. **–î–ª—è –æ—Å–æ–±–∏—Å—Ç–æ–≥–æ ID:** –ù–∞–ø–∏—à—ñ—Ç—å –±–æ—Ç—É –≤ –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö `/get_chat_info`

### –°–ø–æ—Å—ñ–± 2: –ß–µ—Ä–µ–∑ @userinfobot
1. –î–æ–¥–∞–π—Ç–µ @userinfobot –¥–æ –∫–∞–Ω–∞–ª—É/–≥—Ä—É–ø–∏ —è–∫ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. –ù–∞–ø–∏—à—ñ—Ç—å –±—É–¥—å-—è–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –∫–∞–Ω–∞–ª/–≥—Ä—É–ø—É
3. @userinfobot –ø–æ–∫–∞–∂–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –≤–∫–ª—é—á–Ω–æ –∑ ID

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–ª—ñ –∞–¥–º—ñ–Ω–∞
–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–π –±–µ–∑ Stripe:
```bash
# –î—ñ–∑–Ω–∞–π—Ç–µ—Å—è —Å–≤—ñ–π Telegram ID —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É /get_chat_info
# –ü–æ—Ç—ñ–º –Ω–∞–¥–∞–π—Ç–µ —Å–æ–±—ñ –ø—Ä–∞–≤–∞ –∞–¥–º—ñ–Ω–∞:
/set_admin –í–ê–®_TELEGRAM_ID
```

## –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞

### –ó–∞–≥–∞–ª—å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:
- `/start` - –ü–æ—á–∞—Ç–∏ —Ä–æ–±–æ—Ç—É –∑ –±–æ—Ç–æ–º
- `/get_chat_info` - –û—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ—Ç–æ—á–Ω–∏–π —á–∞—Ç (–≥—Ä—É–ø–∏, –ø—Ä–∏–≤–∞—Ç–Ω—ñ —á–∞—Ç–∏)
- `/chat_id` - –®–≤–∏–¥–∫–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ ID —á–∞—Ç—É (–ø—Ä–∞—Ü—é—î –≤ –∫–∞–Ω–∞–ª–∞—Ö)
- `/forward_info` - –û—Ç—Ä–∏–º–∞—Ç–∏ ID –∫–∞–Ω–∞–ª—É —á–µ—Ä–µ–∑ –ø–µ—Ä–µ—Å–∏–ª–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

### –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:
- `/admin` - –ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤)
- `/set_admin <telegram_id>` - –ù–∞–¥–∞—Ç–∏ –ø—Ä–∞–≤–∞ –∞–¥–º—ñ–Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
- `/manage_links` - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è invite –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏
- `/create_invite <chat_id> <chat_type> <invite_link> [–Ω–∞–∑–≤–∞]` - –°—Ç–≤–æ—Ä–∏—Ç–∏ invite –ø–æ—Å–∏–ª–∞–Ω–Ω—è
- `/list_invites` - –ü–æ–∫–∞–∑–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –ø–æ—Å–∏–ª–∞–Ω—å

### –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –∞–¥–º—ñ–Ω —Ä–µ–∂–∏–º—É:
- –¢–µ—Å—Ç–æ–≤–∞ –æ–ø–ª–∞—Ç–∞ –±–µ–∑ Stripe
- –Ü–º—ñ—Ç–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∏—Ö –ø–ª–∞—Ç–µ–∂—ñ–≤ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ–ª–æ—É
- –î–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö —Ñ—É–Ω–∫—Ü—ñ–π –±–æ—Ç–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
upgrade-studio-bot/
‚îú‚îÄ‚îÄ bot/                    # –ú–æ–¥—É–ª—ñ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers/          # –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/         # –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
‚îÇ   ‚îî‚îÄ‚îÄ utils/            # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
‚îú‚îÄ‚îÄ database/             # –ú–æ–¥–µ–ª—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ payments/             # –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Stripe
‚îú‚îÄ‚îÄ tasks/               # –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –∑–∞–¥–∞—á
‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ main.py            # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ webhook_server.py  # –°–µ—Ä–≤–µ—Ä –¥–ª—è webhook
‚îî‚îÄ‚îÄ requirements.txt   # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
```

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License