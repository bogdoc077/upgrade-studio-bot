# Tech Group Notifications

## –û–≥–ª—è–¥
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–¥—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤–∞–∂–ª–∏–≤—ñ –ø–æ–¥—ñ—ó –ø—ñ–¥–ø–∏—Å–æ–∫ –≤ Tech –≥—Ä—É–ø—É.

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- **Tech Group ID**: `-5123404747`
- **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è**: `config.py` ‚Üí `tech_notifications_chat_id`

## –ü–æ–¥—ñ—ó, —è–∫—ñ –≤—ñ–¥—Å—Ç–µ–∂—É—é—Ç—å—Å—è

### 1. ‚úÖ –£—Å–ø—ñ—à–Ω–∞ –æ–ø–ª–∞—Ç–∞ (–Ω–æ–≤–∞ –ø—ñ–¥–ø–∏—Å–∫–∞)
**–§–∞–π–ª**: `webhook_server.py` ‚Üí `handle_checkout_session_completed()`

–í—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –ø—Ä–∏:
- –û–ø–ª–∞—Ç—ñ –Ω–æ–≤–æ—ó –ø—ñ–¥–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ Stripe Checkout

–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á (username/—ñ–º'—è)
- Telegram ID
- –ü–æ–≤–Ω–µ —ñ–º'—è
- –°—É–º–∞ —Ç–∞ –≤–∞–ª—é—Ç–∞
- –î–∞—Ç–∞ –æ–ø–ª–∞—Ç–∏

### 2. üîÑ –ü—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏ (–∞–≤—Ç–æ–ø–ª–∞—Ç—ñ–∂)
**–§–∞–π–ª**: `webhook_server.py` ‚Üí `handle_invoice_payment_succeeded()`

–í—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –ø—Ä–∏:
- –£—Å–ø—ñ—à–Ω–æ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–º—É —Å–ø–∏—Å–∞–Ω–Ω—ñ –∫–æ—à—Ç—ñ–≤ –∑–∞ –ø—ñ–¥–ø–∏—Å–∫—É

–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á (username/—ñ–º'—è)
- Telegram ID
- –ü–æ–≤–Ω–µ —ñ–º'—è
- –°—É–º–∞ —Ç–∞ –≤–∞–ª—é—Ç–∞
- –î–∞—Ç–∞ –æ–ø–ª–∞—Ç–∏

### 3. ‚ùå –ù–µ–≤–¥–∞–ª–∞ –æ–ø–ª–∞—Ç–∞
**–§–∞–π–ª**: `webhook_server.py` ‚Üí `handle_invoice_payment_failed()`

–í—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –ø—Ä–∏:
- –ù–µ–≤–¥–∞–ª–æ–º—É —Å–ø–∏—Å–∞–Ω–Ω—ñ –∫–æ—à—Ç—ñ–≤ –∑–∞ –ø—ñ–¥–ø–∏—Å–∫—É
- –ü—Ä–æ–±–ª–µ–º–∞—Ö –∑ –∫–∞—Ä—Ç–∫–æ—é

–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á (username/—ñ–º'—è)
- Telegram ID
- –ü–æ–≤–Ω–µ —ñ–º'—è
- –°—É–º–∞ —Ç–∞ –≤–∞–ª—é—Ç–∞
- –î–∞—Ç–∞ –Ω–µ–≤–¥–∞–ª–æ—ó —Å–ø—Ä–æ–±–∏

### 4. ‚ñ∂Ô∏è –ü–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏
**–§–∞–π–ª**: `main.py` ‚Üí `resume_subscription()`

–í—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –ø—Ä–∏:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—Ä—É—á–Ω—É –ø–æ–Ω–æ–≤–ª—é—î –ø—Ä–∏–∑—É–ø–∏–Ω–µ–Ω—É –ø—ñ–¥–ø–∏—Å–∫—É

–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á (username/—ñ–º'—è)
- Telegram ID
- –ü–æ–≤–Ω–µ —ñ–º'—è
- –î–∞—Ç–∞ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è

### 5. ‚è∏ –ü—Ä–∏–∑—É–ø–∏–Ω–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏
**–§–∞–π–ª**: `main.py` ‚Üí `pause_subscription()`

–í—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –ø—Ä–∏:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø—Ä–∏–∑—É–ø–∏–Ω—è—î —Å–≤–æ—é –ø—ñ–¥–ø–∏—Å–∫—É (–≤–∏–º–∏–∫–∞—î –∞–≤—Ç–æ–ø–ª–∞—Ç—ñ–∂)

–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á (username/—ñ–º'—è)
- Telegram ID
- –ü–æ–≤–Ω–µ —ñ–º'—è
- –î–∞—Ç–∞ –ø—Ä–∏–∑—É–ø–∏–Ω–µ–Ω–Ω—è

### 6. üî¥ –°–∫–∞—Å—É–≤–∞–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏
**–§–∞–π–ª**: `main.py` ‚Üí `cancel_subscription()`

–í—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –ø—Ä–∏:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤–Ω—ñ—Å—Ç—é —Å–∫–∞—Å–æ–≤—É—î –ø—ñ–¥–ø–∏—Å–∫—É

–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á (username/—ñ–º'—è)
- Telegram ID
- –ü–æ–≤–Ω–µ —ñ–º'—è
- –î–∞—Ç–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É
- –î–∞—Ç–∞ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è

## –¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### –ú–µ—Ç–æ–¥ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
```python
async def send_tech_notification(self, message: str):
    """–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ Tech –≥—Ä—É–ø—É"""
    await self.bot.send_message(
        chat_id=settings.tech_notifications_chat_id,
        text=message,
        parse_mode='Markdown'
    )
```

### –§–æ—Ä–º–∞—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è Markdown —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è
- –ö–æ–∂–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –º—ñ—Å—Ç–∏—Ç—å –µ–º–æ–¥–∑—ñ –¥–ª—è —à–≤–∏–¥–∫–æ—ó —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- Telegram ID —Ñ–æ—Ä–º–∞—Ç—É—î—Ç—å—Å—è —è–∫ `code` –¥–ª—è –ª–µ–≥–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π Tech Group ID
ssh root@173.242.49.209
cd /opt/upgrade-studio-bot
grep -n "tech_notifications_chat_id" config.py
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤
```bash
# –õ–æ–≥–∏ webhook —Å–µ—Ä–≤—ñ—Å—É (–æ–ø–ª–∞—Ç–∏, –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è)
journalctl -u upgrade-webhook -f | grep "Tech"

# –õ–æ–≥–∏ API —Å–µ—Ä–≤—ñ—Å—É (–ø—Ä–∏–∑—É–ø–∏–Ω–µ–Ω–Ω—è, —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è)
journalctl -u upgrade-api -f | grep "Tech"
```

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
1. **–£—Å–ø—ñ—à–Ω–∞ –æ–ø–ª–∞—Ç–∞**: –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –ø—ñ–¥–ø–∏—Å–∫—É —á–µ—Ä–µ–∑ –±–æ—Ç
2. **–ü—Ä–∏–∑—É–ø–∏–Ω–µ–Ω–Ω—è**: –í–∏–∫–ª–∏–∫–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É `/subscription` ‚Üí –ü—Ä–∏–∑—É–ø–∏–Ω–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É
3. **–ü–æ–Ω–æ–≤–ª–µ–Ω–Ω—è**: –í–∏–∫–ª–∏–∫–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É `/subscription` ‚Üí –ü–æ–Ω–æ–≤–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É
4. **–°–∫–∞—Å—É–≤–∞–Ω–Ω—è**: –í–∏–∫–ª–∏–∫–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É `/subscription` ‚Üí –°–∫–∞—Å—É–≤–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É

## –ó–º—ñ–Ω–∞ Tech Group ID

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ –≥—Ä—É–ø—É –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å:

1. –í—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ `config.py`:
```python
tech_notifications_chat_id: str = Field(default="-–ù–û–í–ò–ô_ID", env="TECH_NOTIFICATIONS_CHAT_ID")
```

2. –ê–±–æ –¥–æ–¥–∞—Ç–∏ –≤ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:
```bash
TECH_NOTIFICATIONS_CHAT_ID=-–ù–û–í–ò–ô_ID
```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å–∏:
```bash
systemctl restart upgrade-api upgrade-webhook
```

## –ü—Ä–∏–º—ñ—Ç–∫–∏
- –ë–æ—Ç –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –¥–æ–¥–∞–Ω–∏–π –¥–æ –≥—Ä—É–ø–∏ –∑ –ø—Ä–∞–≤–∞–º–∏ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —ñ –Ω–µ –±–ª–æ–∫—É—é—Ç—å –æ—Å–Ω–æ–≤–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
- –£ –≤–∏–ø–∞–¥–∫—É –ø–æ–º–∏–ª–∫–∏ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ - –ø–æ–º–∏–ª–∫–∞ –ª–æ–≥—É—î—Ç—å—Å—è, –∞–ª–µ –ø—Ä–æ—Ü–µ—Å –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è
